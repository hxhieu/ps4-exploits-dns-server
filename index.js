import dns from 'native-dns';
import { requestHandler } from './handlers/request';
import { errorHandler, socketErrorHandler } from './handlers/error';
import { logInfo } from './utils/logger';

const server = dns.createServer();

server.on('listening', () => logInfo(`server listening on ${server.address()}`));
server.on('close', () => logInfo(`server closed ${server.address()}`));
server.on('error', errorHandler);
server.on('socketError', socketErrorHandler);
server.on('request', requestHandler);

server.serve(53);
